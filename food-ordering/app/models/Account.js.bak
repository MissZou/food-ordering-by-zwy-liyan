var mongoose = require('mongoose');
var Schema = mongoose.Schema;
var crypto = require('crypto');

var AccountSchema = new mongoose.Schema({
    email:     { type: String, unique: true },
    password:  { type: String },
    phone:     { type: String },
    name: {
      first:   { type: String },
      last:    { type: String }
    },
    birthday: {
      day:     { type: Number, min: 1, max: 31, required: false },
      month:   { type: Number, min: 1, max: 12, required: false },
      year:    { type: Number }
    },
    photoUrl:  { type: String },
    biography: { type: String }
  });

Account = function(){

  console.log('creat account object');

};

function registerCallback(err) {
   if (err) {
     return console.log(err);
   };
   return console.log('Account was created');
 };

Account.prototype.login = function(email, password, callback) {
    var shaSum = crypto.createHash('sha256');
  shaSum.update(password);
  Account.findOne({email:email,password:shaSum.digest('hex')},function(err,doc){
      callback(null!=doc);
  });
};

module.exports = mongoose.model('Account', AccountSchema);
exports.Account = Account;